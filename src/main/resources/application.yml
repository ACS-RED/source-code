server:
  port: 8080
  # [추가] 톰캣 스레드 설정 (동시 접속자 처리 능력 향상)
  tomcat:
    threads:
      max: 500            # 기본값 200 -> 500으로 증가 (동시 요청 처리 수)
      min-spare: 50       # 항상 대기하는 최소 스레드 수
    accept-count: 1000    # 스레드가 꽉 찼을 때 대기열 크기

spring:
  application:
    name: jeoktoma-race

  # AWS Secrets Manager 연동
  config:
    import: aws-secretsmanager:jeoktoma-db

  # DB 연결 정보
  datasource:
    url: jdbc:mysql://${host}:${port}/${dbname}?useSSL=false&serverTimezone=UTC&allowPublicKeyRetrieval=true
    username: ${username}
    password: ${password}
    driver-class-name: com.mysql.cj.jdbc.Driver
    
    # [추가] HikariCP(DB 커넥션 풀) 설정
    hikari:
      maximum-pool-size: 100  # 기본값 10 -> 100으로 증가 (동시에 DB 연결할 수 있는 수)
      connection-timeout: 30000 # 30초 (연결 기다리는 시간)
      minimum-idle: 20        # 아무 일 안 해도 유지할 최소 연결 수

  # JPA 설정
  jpa:
    hibernate:
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect

  # 정적 리소스 설정
  web:
    resources:
      static-locations: classpath:/static/,classpath:/public/

# 로깅 설정
logging:
  level:
    com.jeoktoma: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

app:
  version: v1.0
